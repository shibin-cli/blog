<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Lerna | web学习笔记</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Lerna 是一个优化基于git+npm的多package项目管理工具 优势  大幅度减少重复操作 提升操作单标椎化  原生脚手架的痛点 重复操作，多个package 本地link 依赖安装 单元测试 代码提交 代码发布   版本一致性 版本一致性 发布后相互依赖版本升级    package越多，管理复杂度就越高 Lerna的使用12345678910111213141516171819npm">
<meta property="og:type" content="article">
<meta property="og:title" content="Lerna">
<meta property="og:url" content="https://shibin-cli.github.io/blog/2021/06/29/lerna/index.html">
<meta property="og:site_name" content="web学习笔记">
<meta property="og:description" content="Lerna 是一个优化基于git+npm的多package项目管理工具 优势  大幅度减少重复操作 提升操作单标椎化  原生脚手架的痛点 重复操作，多个package 本地link 依赖安装 单元测试 代码提交 代码发布   版本一致性 版本一致性 发布后相互依赖版本升级    package越多，管理复杂度就越高 Lerna的使用12345678910111213141516171819npm">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-06-29T14:36:34.151Z">
<meta property="article:modified_time" content="2021-06-29T14:36:34.151Z">
<meta property="article:author" content="Shibin You">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/blog/atom.xml" title="web学习笔记" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/blog/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/blog/css/style.css">

  
    
<link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/blog/" id="logo">web学习笔记</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/blog/" id="subtitle">web学习笔记</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/blog/">Home</a>
        
          <a class="main-nav-link" href="/blog/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/blog/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Suche"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Suche"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://shibin-cli.github.io/blog"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-lerna" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/blog/2021/06/29/lerna/" class="article-date">
  <time class="dt-published" datetime="2021-06-29T14:36:34.151Z" itemprop="datePublished">2021-06-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      Lerna
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://github.com/lerna/lerna">Lerna</a> 是一个优化基于git+npm的多package项目管理工具</p>
<p>优势</p>
<ul>
<li>大幅度减少重复操作</li>
<li>提升操作单标椎化</li>
</ul>
<h2 id="原生脚手架的痛点"><a href="#原生脚手架的痛点" class="headerlink" title="原生脚手架的痛点"></a>原生脚手架的痛点</h2><ul>
<li>重复操作，多个package<ul>
<li>本地link</li>
<li>依赖安装</li>
<li>单元测试</li>
<li>代码提交</li>
<li>代码发布</li>
</ul>
</li>
<li>版本一致性<ul>
<li>版本一致性</li>
<li>发布后相互依赖版本升级</li>
</ul>
</li>
</ul>
<p>package越多，管理复杂度就越高</p>
<h2 id="Lerna的使用"><a href="#Lerna的使用" class="headerlink" title="Lerna的使用"></a>Lerna的使用</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">npm install lerna -g</span><br><span class="line"><span class="comment"># 初始化lerna</span></span><br><span class="line">lerna init</span><br><span class="line"><span class="comment"># 创建一个包</span></span><br><span class="line">lerna create core</span><br><span class="line"><span class="comment"># 安装依赖</span></span><br><span class="line">lerna add xxx</span><br><span class="line"><span class="comment"># 删除依赖</span></span><br><span class="line">lerna clean</span><br><span class="line"><span class="comment"># 给指定package安装依赖</span></span><br><span class="line">lerna add vue packages/core</span><br><span class="line"><span class="comment"># 重新安装依赖</span></span><br><span class="line">lerna bootstrap</span><br><span class="line"><span class="comment"># 本地项目相互依赖</span></span><br><span class="line">lerna link</span><br><span class="line"><span class="comment"># 执行npm script</span></span><br><span class="line">lerna run</span><br><span class="line"><span class="comment"># 发布</span></span><br><span class="line">lerna publish</span><br></pre></td></tr></table></figure>
<h2 id="lerna源码"><a href="#lerna源码" class="headerlink" title="lerna源码"></a>lerna源码</h2><p>首先从github上下载源码 <a target="_blank" rel="noopener" href="https://github.com/lerna/lerna">https://github.com/lerna/lerna</a></p>
<p>然后安装依赖</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure>
<p>如果无法安装成功可以修改.npmrc文件，修改镜像地址为淘宝镜像  <a target="_blank" rel="noopener" href="https://registry.npm.taobao.org/">https://registry.npm.taobao.org/</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># just in case a private registry is configured in ~&#x2F;.npmrc</span><br><span class="line">registry &#x3D; https:&#x2F;&#x2F;registry.npm.taobao.org&#x2F;</span><br></pre></td></tr></table></figure>
<p>通过查看package.json文件可以看出入口文件为<code>core/lerna/cli.js</code></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  ...</span><br><span class="line">  &quot;bin&quot;: &#123;</span><br><span class="line">    &quot;lerna&quot;: &quot;core/lerna/cli.js&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在<code>core/lerna/cli.js</code>中引入了<code>core/lerna/cli.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env node</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* eslint-disable import/no-dynamic-require, global-require */</span></span><br><span class="line"><span class="keyword">const</span> importLocal = <span class="built_in">require</span>(<span class="string">&quot;import-local&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (importLocal(__filename)) &#123;</span><br><span class="line">  <span class="built_in">require</span>(<span class="string">&quot;npmlog&quot;</span>).info(<span class="string">&quot;cli&quot;</span>, <span class="string">&quot;using local version of lerna&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="built_in">require</span>(<span class="string">&quot;.&quot;</span>)(process.argv.slice(<span class="number">2</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们可以看到很多模块导入时通过<code>@lerna/xxx</code>导入的</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cli = <span class="built_in">require</span>(<span class="string">&quot;@lerna/cli&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>它导入的并不是外面npm安装的模块，我们可以查看当前目录下的package.json文件,在这里配置了模块的路径为本地路径，当模块发布时,我们也不必担心，lerna会自动处理模块的导入</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  ...</span><br><span class="line"> <span class="string">&quot;dependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;@lerna/add&quot;</span>: <span class="string">&quot;file:../../commands/add&quot;</span>,</span><br><span class="line">    <span class="string">&quot;@lerna/bootstrap&quot;</span>: <span class="string">&quot;file:../../commands/bootstrap&quot;</span>,</span><br><span class="line">    <span class="string">&quot;@lerna/changed&quot;</span>: <span class="string">&quot;file:../../commands/changed&quot;</span>,</span><br><span class="line">    <span class="string">&quot;@lerna/clean&quot;</span>: <span class="string">&quot;file:../../commands/clean&quot;</span>,</span><br><span class="line">    ...</span><br><span class="line"> &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="yargs"><a href="#yargs" class="headerlink" title="yargs"></a>yargs</h3><p>lerna中使用了<a target="_blank" rel="noopener" href="https://github.com/yargs/yargs">yargs</a>这个模块，所以首先要了解yargs如何使用</p>
<h4 id="实现一个yargs最简单的脚手架"><a href="#实现一个yargs最简单的脚手架" class="headerlink" title="实现一个yargs最简单的脚手架"></a>实现一个yargs最简单的脚手架</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#! /usr/bin/env node</span></span><br><span class="line"><span class="keyword">const</span> yargs = <span class="built_in">require</span>(<span class="string">&#x27;yargs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 同事还会将掺入的参数解析成对象</span></span><br><span class="line">yargs(process.argv.slice(<span class="number">2</span>)).argv</span><br><span class="line"><span class="comment">// 后者可以写成 </span></span><br><span class="line"><span class="comment">// yargs().parse(process.argv.slice(2))</span></span><br></pre></td></tr></table></figure>
<p>然后输入</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cli --<span class="built_in">help</span></span><br></pre></td></tr></table></figure>
<p>就会出现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">选项：</span><br><span class="line">  --help     显示帮助信息                                                 [布尔]</span><br><span class="line">  --version  显示版本号                                                   [布尔]</span><br></pre></td></tr></table></figure>
<h4 id="yargs常用的方法"><a href="#yargs常用的方法" class="headerlink" title="yargs常用的方法"></a>yargs常用的方法</h4><p>对应方法的文档可以查看 <a target="_blank" rel="noopener" href="https://github.com/yargs/yargs/blob/master/docs/api.md">https://github.com/yargs/yargs/blob/master/docs/api.md</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> argv = process.argv.slice(<span class="number">2</span>)</span><br><span class="line"><span class="keyword">const</span> cli = yargs()</span><br><span class="line"><span class="keyword">const</span> constext = &#123;</span><br><span class="line">    cliVersion: pkg.version</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">cli.usage(<span class="string">&#x27;cli-test [command] &lt;options&gt;&#x27;</span>)</span><br><span class="line">    .alias(<span class="string">&#x27;v&#x27;</span>, <span class="string">&#x27;version&#x27;</span>) <span class="comment">//别名</span></span><br><span class="line">    .alias(<span class="string">&#x27;h&#x27;</span>, <span class="string">&#x27;help&#x27;</span>)</span><br><span class="line">    <span class="comment">// 定义用户输出的最小长度和最大长度  </span></span><br><span class="line">    <span class="comment">// https://github.com/yargs/yargs/blob/master/docs/api.md#demandCommand</span></span><br><span class="line">    .demandCommand(<span class="number">1</span>, <span class="string">&#x27;A command is required&#x27;</span>)</span><br><span class="line">    .wrap(cli.terminalWidth())</span><br><span class="line">    <span class="comment">// 控制台最后输出的内容</span></span><br><span class="line">        .epilogue(dedent<span class="string">` das</span></span><br><span class="line"><span class="string">      aa</span></span><br><span class="line"><span class="string">    asd`</span>)</span><br><span class="line">    <span class="comment">// 命令</span></span><br><span class="line">    .command(<span class="string">&#x27;init [name]&#x27;</span>, <span class="string">&#x27;Do it in a project&#x27;</span>, <span class="function"><span class="params">yargs</span> =&gt;</span> &#123;</span><br><span class="line">        yargs</span><br><span class="line">            .option(<span class="string">&#x27;name&#x27;</span>, &#123;</span><br><span class="line">                type: <span class="string">&#x27;string&#x27;</span>,</span><br><span class="line">                describe: <span class="string">&#x27;Name of a project&#x27;</span></span><br><span class="line">            &#125;)</span><br><span class="line"></span><br><span class="line">    &#125;, <span class="function"><span class="params">argv</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(argv)</span><br><span class="line">    &#125;)</span><br><span class="line">    .recommendCommands()</span><br><span class="line">    .fail(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err)</span><br><span class="line">    &#125;)</span><br><span class="line">    .command(&#123;</span><br><span class="line">        command: <span class="string">&#x27;list&#x27;</span>,</span><br><span class="line">        aliases: [<span class="string">&#x27;ls&#x27;</span>, <span class="string">&#x27;la&#x27;</span>, <span class="string">&#x27;ll&#x27;</span>],</span><br><span class="line">        builder: <span class="function"><span class="params">yargs</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(yargs)</span><br><span class="line">            <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        handler: <span class="function"><span class="params">argv</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(argv)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .options(&#123;</span><br><span class="line">        debug: &#123;</span><br><span class="line">            type: <span class="string">&#x27;boolean&#x27;</span>,</span><br><span class="line">            describe: <span class="string">&#x27;Boostrap debug mode&#x27;</span>,</span><br><span class="line">            alias: <span class="string">&#x27;d&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">        <span class="comment">// 选项  如vue create a -r=https://registry.npm.taobao.org/</span></span><br><span class="line">    .option(<span class="string">&#x27;registry&#x27;</span>, &#123;</span><br><span class="line">        type: <span class="string">&#x27;string&#x27;</span>,</span><br><span class="line">        describe: <span class="string">&#x27;Define global registry&#x27;</span>,</span><br><span class="line">        alias: <span class="string">&#x27;r&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">//命令在控制台的分类</span></span><br><span class="line">    .group([<span class="string">&#x27;debug&#x27;</span>], <span class="string">&#x27;Dev Options&#x27;</span>)</span><br><span class="line">    .strict()</span><br><span class="line">    <span class="comment">// constext会和argv进行合并</span></span><br><span class="line">    .parse(argv, constext)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="lerna的初始化过程"><a href="#lerna的初始化过程" class="headerlink" title="lerna的初始化过程"></a>lerna的初始化过程</h4><p>lerna的入口文件<code>core/lerna/cli.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env node</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* eslint-disable import/no-dynamic-require, global-require */</span></span><br><span class="line"><span class="keyword">const</span> importLocal = <span class="built_in">require</span>(<span class="string">&quot;import-local&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (importLocal(__filename)) &#123;</span><br><span class="line">  <span class="built_in">require</span>(<span class="string">&quot;npmlog&quot;</span>).info(<span class="string">&quot;cli&quot;</span>, <span class="string">&quot;using local version of lerna&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// 引入的当前目录下的index.js</span></span><br><span class="line">  <span class="built_in">require</span>(<span class="string">&quot;.&quot;</span>)(process.argv.slice(<span class="number">2</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>core/lerna/index.js</code>，该文件中主要是注册了一些命令</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> cli = <span class="built_in">require</span>(<span class="string">&quot;@lerna/cli&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> addCmd = <span class="built_in">require</span>(<span class="string">&quot;@lerna/add/command&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> bootstrapCmd = <span class="built_in">require</span>(<span class="string">&quot;@lerna/bootstrap/command&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> changedCmd = <span class="built_in">require</span>(<span class="string">&quot;@lerna/changed/command&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> cleanCmd = <span class="built_in">require</span>(<span class="string">&quot;@lerna/clean/command&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> createCmd = <span class="built_in">require</span>(<span class="string">&quot;@lerna/create/command&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> diffCmd = <span class="built_in">require</span>(<span class="string">&quot;@lerna/diff/command&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> execCmd = <span class="built_in">require</span>(<span class="string">&quot;@lerna/exec/command&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> importCmd = <span class="built_in">require</span>(<span class="string">&quot;@lerna/import/command&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> infoCmd = <span class="built_in">require</span>(<span class="string">&quot;@lerna/info/command&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> initCmd = <span class="built_in">require</span>(<span class="string">&quot;@lerna/init/command&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> linkCmd = <span class="built_in">require</span>(<span class="string">&quot;@lerna/link/command&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> listCmd = <span class="built_in">require</span>(<span class="string">&quot;@lerna/list/command&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> publishCmd = <span class="built_in">require</span>(<span class="string">&quot;@lerna/publish/command&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> runCmd = <span class="built_in">require</span>(<span class="string">&quot;@lerna/run/command&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> versionCmd = <span class="built_in">require</span>(<span class="string">&quot;@lerna/version/command&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> pkg = <span class="built_in">require</span>(<span class="string">&quot;./package.json&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = main;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span>(<span class="params">argv</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> context = &#123;</span><br><span class="line">    lernaVersion: pkg.version,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> cli()</span><br><span class="line">    .command(addCmd)</span><br><span class="line">    .command(bootstrapCmd)</span><br><span class="line">    .command(changedCmd)</span><br><span class="line">    .command(cleanCmd)</span><br><span class="line">    .command(createCmd)</span><br><span class="line">    .command(diffCmd)</span><br><span class="line">    .command(execCmd)</span><br><span class="line">    .command(importCmd)</span><br><span class="line">    .command(infoCmd)</span><br><span class="line">    .command(initCmd)</span><br><span class="line">    .command(linkCmd)</span><br><span class="line">    .command(listCmd)</span><br><span class="line">    .command(publishCmd)</span><br><span class="line">    .command(runCmd)</span><br><span class="line">    .command(versionCmd)</span><br><span class="line">    .parse(argv, context);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>core/cli/index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dedent = <span class="built_in">require</span>(<span class="string">&quot;dedent&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> log = <span class="built_in">require</span>(<span class="string">&quot;npmlog&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> yargs = <span class="built_in">require</span>(<span class="string">&quot;yargs/yargs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> globalOptions = <span class="built_in">require</span>(<span class="string">&quot;@lerna/global-options&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = lernaCLI;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * A factory that returns a yargs() instance configured with everything except commands.</span></span><br><span class="line"><span class="comment"> * Chain .parse() from this method to invoke.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;Array = []&#125;</span> <span class="variable">argv</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;String = process.cwd()&#125;</span> <span class="variable">cwd</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">lernaCLI</span>(<span class="params">argv, cwd</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> cli = yargs(argv, cwd);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> globalOptions(cli)</span><br><span class="line">    .usage(<span class="string">&quot;Usage: $0 &lt;command&gt; [options]&quot;</span>)</span><br><span class="line">    .demandCommand(<span class="number">1</span>, <span class="string">&quot;A command is required. Pass --help to see all available commands and options.&quot;</span>)</span><br><span class="line">    .recommendCommands()</span><br><span class="line">    .strict()</span><br><span class="line">    .fail(<span class="function">(<span class="params">msg, err</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// certain yargs validations throw strings :P</span></span><br><span class="line">      <span class="keyword">const</span> actual = err || <span class="keyword">new</span> <span class="built_in">Error</span>(msg);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// ValidationErrors are already logged, as are package errors</span></span><br><span class="line">      <span class="keyword">if</span> (actual.name !== <span class="string">&quot;ValidationError&quot;</span> &amp;&amp; !actual.pkg) &#123;</span><br><span class="line">        <span class="comment">// the recommendCommands() message is too terse</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="regexp">/Did you mean/</span>.test(actual.message)) &#123;</span><br><span class="line">          log.error(<span class="string">&quot;lerna&quot;</span>, <span class="string">`Unknown command &quot;<span class="subst">$&#123;cli.parsed.argv._[<span class="number">0</span>]&#125;</span>&quot;`</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        log.error(<span class="string">&quot;lerna&quot;</span>, actual.message);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// exit non-zero so the CLI can be usefully chained</span></span><br><span class="line">      cli.exit(actual.code &gt; <span class="number">0</span> ? actual.code : <span class="number">1</span>, actual);</span><br><span class="line">    &#125;)</span><br><span class="line">    .alias(<span class="string">&quot;h&quot;</span>, <span class="string">&quot;help&quot;</span>)</span><br><span class="line">    .alias(<span class="string">&quot;v&quot;</span>, <span class="string">&quot;version&quot;</span>)</span><br><span class="line">    .wrap(cli.terminalWidth()).epilogue(dedent<span class="string">`</span></span><br><span class="line"><span class="string">      When a command fails, all logs are written to lerna-debug.log in the current working directory.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">      For more information, find our manual at https://github.com/lerna/lerna</span></span><br><span class="line"><span class="string">    `</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><code>core/global-options/index.js</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> os = <span class="built_in">require</span>(<span class="string">&quot;os&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = globalOptions;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">globalOptions</span>(<span class="params">yargs</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// the global options applicable to _every_ command</span></span><br><span class="line">  <span class="keyword">const</span> opts = &#123;</span><br><span class="line">    loglevel: &#123;</span><br><span class="line">      defaultDescription: <span class="string">&quot;info&quot;</span>,</span><br><span class="line">      describe: <span class="string">&quot;What level of logs to report.&quot;</span>,</span><br><span class="line">      type: <span class="string">&quot;string&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    concurrency: &#123;</span><br><span class="line">      defaultDescription: os.cpus().length,</span><br><span class="line">      describe: <span class="string">&quot;How many processes to use when lerna parallelizes tasks.&quot;</span>,</span><br><span class="line">      type: <span class="string">&quot;number&quot;</span>,</span><br><span class="line">      requiresArg: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;reject-cycles&quot;</span>: &#123;</span><br><span class="line">      describe: <span class="string">&quot;Fail if a cycle is detected among dependencies.&quot;</span>,</span><br><span class="line">      type: <span class="string">&quot;boolean&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;no-progress&quot;</span>: &#123;</span><br><span class="line">      describe: <span class="string">&quot;Disable progress bars. (Always off in CI)&quot;</span>,</span><br><span class="line">      type: <span class="string">&quot;boolean&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    progress: &#123;</span><br><span class="line">      <span class="comment">// proxy for --no-progress</span></span><br><span class="line">      hidden: <span class="literal">true</span>,</span><br><span class="line">      type: <span class="string">&quot;boolean&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;no-sort&quot;</span>: &#123;</span><br><span class="line">      describe: <span class="string">&quot;Do not sort packages topologically (dependencies before dependents).&quot;</span>,</span><br><span class="line">      type: <span class="string">&quot;boolean&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    sort: &#123;</span><br><span class="line">      <span class="comment">// proxy for --no-sort</span></span><br><span class="line">      hidden: <span class="literal">true</span>,</span><br><span class="line">      type: <span class="string">&quot;boolean&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;max-buffer&quot;</span>: &#123;</span><br><span class="line">      describe: <span class="string">&quot;Set max-buffer (in bytes) for subcommand execution&quot;</span>,</span><br><span class="line">      type: <span class="string">&quot;number&quot;</span>,</span><br><span class="line">      requiresArg: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// group options under &quot;Global Options:&quot; </span></span><br><span class="line">  <span class="comment">// 全局options归类为  Global Options:</span></span><br><span class="line">  <span class="keyword">const</span> globalKeys = <span class="built_in">Object</span>.keys(opts).concat([<span class="string">&quot;help&quot;</span>, <span class="string">&quot;version&quot;</span>]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> yargs</span><br><span class="line">    .options(opts)</span><br><span class="line">    .group(globalKeys, <span class="string">&quot;Global Options:&quot;</span>)</span><br><span class="line">    .option(<span class="string">&quot;ci&quot;</span>, &#123;</span><br><span class="line">      hidden: <span class="literal">true</span>,</span><br><span class="line">      type: <span class="string">&quot;boolean&quot;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="lerna的command"><a href="#lerna的command" class="headerlink" title="lerna的command"></a>lerna的command</h4><p>list命令</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> filterable = <span class="built_in">require</span>(<span class="string">&quot;@lerna/filter-options&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> listable = <span class="built_in">require</span>(<span class="string">&quot;@lerna/listable&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see </span>https://github.com/yargs/yargs/blob/master/docs/advanced.md#providing-a-command-module</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">exports</span>.command = <span class="string">&quot;list&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">exports</span>.aliases = [<span class="string">&quot;ls&quot;</span>, <span class="string">&quot;la&quot;</span>, <span class="string">&quot;ll&quot;</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">exports</span>.describe = <span class="string">&quot;List local packages&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">exports</span>.builder = <span class="function"><span class="params">yargs</span> =&gt;</span> &#123;</span><br><span class="line">  listable.options(yargs);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> filterable(yargs);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">exports</span>.handler = <span class="function"><span class="keyword">function</span> <span class="title">handler</span>(<span class="params">argv</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">require</span>(<span class="string">&quot;.&quot;</span>)(argv);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="import-local"><a href="#import-local" class="headerlink" title="import-local"></a>import-local</h4><p>在lerna的入口文件中，导入了<code>import-local</code>模块</p>
<p>在lerna开始执行时会先判断本地是否安装lerna，如果已经安装了，就导入本地安装的，否则就导入全局安装的lerna文件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env node</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* eslint-disable import/no-dynamic-require, global-require */</span></span><br><span class="line"><span class="keyword">const</span> importLocal = <span class="built_in">require</span>(<span class="string">&quot;import-local&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (importLocal(__filename)) &#123;</span><br><span class="line">  <span class="built_in">require</span>(<span class="string">&quot;npmlog&quot;</span>).info(<span class="string">&quot;cli&quot;</span>, <span class="string">&quot;using local version of lerna&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="built_in">require</span>(<span class="string">&quot;.&quot;</span>)(process.argv.slice(<span class="number">2</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>import-local</code>中的源码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> resolveCwd = <span class="built_in">require</span>(<span class="string">&#x27;resolve-cwd&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> pkgDir = <span class="built_in">require</span>(<span class="string">&#x27;pkg-dir&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="params">filename</span> =&gt;</span> &#123;</span><br><span class="line">	<span class="keyword">const</span> globalDir = pkgDir.sync(path.dirname(filename));</span><br><span class="line">	<span class="keyword">const</span> relativePath = path.relative(globalDir, filename);</span><br><span class="line">	<span class="keyword">const</span> pkg = <span class="built_in">require</span>(path.join(globalDir, <span class="string">&#x27;package.json&#x27;</span>));</span><br><span class="line">	<span class="keyword">const</span> localFile = resolveCwd.silent(path.join(pkg.name, relativePath));</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Use `path.relative()` to detect local package installation,</span></span><br><span class="line">	<span class="comment">// because __filename&#x27;s case is inconsistent on Windows</span></span><br><span class="line">	<span class="comment">// Can use `===` when targeting Node.js 8</span></span><br><span class="line">	<span class="comment">// See https://github.com/nodejs/node/issues/6624</span></span><br><span class="line">	<span class="keyword">return</span> localFile &amp;&amp; path.relative(localFile, filename) !== <span class="string">&#x27;&#x27;</span> ? <span class="built_in">require</span>(localFile) : <span class="literal">null</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://shibin-cli.github.io/blog/2021/06/29/lerna/" data-id="ckqi5loh10001jsoj11w5bvq4" data-title="Lerna" class="article-share-link">Teilen</a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/blog/2021/06/29/jsdoc/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Neuer</strong>
      <div class="article-nav-title">
        
          jsdoc
        
      </div>
    </a>
  
  
    <a href="/blog/2021/06/29/performance/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Älter</strong>
      <div class="article-nav-title">JavaScript性能优化</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archiv</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2021/06/">六月 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">letzter Beitrag</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog/2021/06/29/jsdoc/">jsdoc</a>
          </li>
        
          <li>
            <a href="/blog/2021/06/29/lerna/">Lerna</a>
          </li>
        
          <li>
            <a href="/blog/2021/06/29/performance/">JavaScript性能优化</a>
          </li>
        
          <li>
            <a href="/blog/2021/06/29/scaffolding/">脚手架</a>
          </li>
        
          <li>
            <a href="/blog/2021/06/29/tools/">前段常用工具</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 Shibin You<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/blog/" class="mobile-nav-link">Home</a>
  
    <a href="/blog/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/blog/js/jquery-3.4.1.min.js"></script>



  
<script src="/blog/fancybox/jquery.fancybox.min.js"></script>




<script src="/blog/js/script.js"></script>





  </div>
</body>
</html>